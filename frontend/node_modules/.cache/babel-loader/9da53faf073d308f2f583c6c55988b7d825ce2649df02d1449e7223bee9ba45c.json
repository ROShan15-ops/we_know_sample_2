{"ast":null,"code":"import React,{useState,useEffect,useCallback,useRef}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SignupModal=_ref=>{let{isOpen,onClose,onSignup}=_ref;const[signupData,setSignupData]=useState({name:'',email:'',password:'',confirmPassword:''});const[authError,setAuthError]=useState('');const nameRef=useRef(null);const emailRef=useRef(null);const passwordRef=useRef(null);const confirmPasswordRef=useRef(null);useEffect(()=>{if(isOpen&&nameRef.current){setTimeout(()=>{nameRef.current.focus();},100);}},[isOpen]);const handleNameChange=useCallback(e=>{setSignupData(prev=>({...prev,name:e.target.value}));},[]);const handleEmailChange=useCallback(e=>{setSignupData(prev=>({...prev,email:e.target.value}));},[]);const handlePasswordChange=useCallback(e=>{setSignupData(prev=>({...prev,password:e.target.value}));},[]);const handleConfirmPasswordChange=useCallback(e=>{setSignupData(prev=>({...prev,confirmPassword:e.target.value}));},[]);const handleSubmit=async e=>{e.preventDefault();setAuthError('');if(!signupData.name||!signupData.email||!signupData.password||!signupData.confirmPassword){setAuthError('Please fill in all fields');return;}if(signupData.password!==signupData.confirmPassword){setAuthError('Passwords do not match');return;}if(signupData.password.length<6){setAuthError('Password must be at least 6 characters');return;}try{const response=await axios.post('/auth/register',{name:signupData.name,email:signupData.email,password:signupData.password});if(response.data.success){localStorage.setItem('weKnowAuthToken',response.data.access_token);localStorage.setItem('weKnowUser',JSON.stringify(response.data.user));onSignup();setSignupData({name:'',email:'',password:'',confirmPassword:''});}else{setAuthError(response.data.error||'Registration failed');}}catch(err){var _err$response,_err$response$data;console.error('Registration error:',err);if((_err$response=err.response)!==null&&_err$response!==void 0&&(_err$response$data=_err$response.data)!==null&&_err$response$data!==void 0&&_err$response$data.error){setAuthError(err.response.data.error);}else{setAuthError('Failed to connect to the server. Please try again.');}}};if(!isOpen)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"auth-modal\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"close-button\",onClick:onClose,children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Sign Up\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Full Name\",value:signupData.name,onChange:handleNameChange,required:true,autoComplete:\"name\",ref:nameRef})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",value:signupData.email,onChange:handleEmailChange,required:true,autoComplete:\"email\",ref:emailRef})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",value:signupData.password,onChange:handlePasswordChange,required:true,autoComplete:\"new-password\",ref:passwordRef})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Confirm Password\",value:signupData.confirmPassword,onChange:handleConfirmPasswordChange,required:true,autoComplete:\"new-password\",ref:confirmPasswordRef})}),authError&&/*#__PURE__*/_jsx(\"div\",{className:\"auth-error\",children:authError}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"auth-submit-button\",children:\"Sign Up\"})]})]})},\"signin-modal\");};export default SignupModal;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useRef","axios","jsx","_jsx","jsxs","_jsxs","SignupModal","_ref","isOpen","onClose","onSignup","signupData","setSignupData","name","email","password","confirmPassword","authError","setAuthError","nameRef","emailRef","passwordRef","confirmPasswordRef","current","setTimeout","focus","handleNameChange","e","prev","target","value","handleEmailChange","handlePasswordChange","handleConfirmPasswordChange","handleSubmit","preventDefault","length","response","post","data","success","localStorage","setItem","access_token","JSON","stringify","user","error","err","_err$response","_err$response$data","console","className","children","onClick","onSubmit","type","placeholder","onChange","required","autoComplete","ref"],"sources":["/Users/roshan/Desktop/we knowsample/frontend/src/components/SignupModal.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport axios from 'axios';\n\nconst SignupModal = ({ isOpen, onClose, onSignup }) => {\n  const [signupData, setSignupData] = useState({ name: '', email: '', password: '', confirmPassword: '' });\n  const [authError, setAuthError] = useState('');\n  const nameRef = useRef(null);\n  const emailRef = useRef(null);\n  const passwordRef = useRef(null);\n  const confirmPasswordRef = useRef(null);\n\n  useEffect(() => {\n    if (isOpen && nameRef.current) {\n      setTimeout(() => {\n        nameRef.current.focus();\n      }, 100);\n    }\n  }, [isOpen]);\n\n  const handleNameChange = useCallback((e) => {\n    setSignupData(prev => ({...prev, name: e.target.value}));\n  }, []);\n\n  const handleEmailChange = useCallback((e) => {\n    setSignupData(prev => ({...prev, email: e.target.value}));\n  }, []);\n\n  const handlePasswordChange = useCallback((e) => {\n    setSignupData(prev => ({...prev, password: e.target.value}));\n  }, []);\n\n  const handleConfirmPasswordChange = useCallback((e) => {\n    setSignupData(prev => ({...prev, confirmPassword: e.target.value}));\n  }, []);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setAuthError('');\n    \n    if (!signupData.name || !signupData.email || !signupData.password || !signupData.confirmPassword) {\n      setAuthError('Please fill in all fields');\n      return;\n    }\n\n    if (signupData.password !== signupData.confirmPassword) {\n      setAuthError('Passwords do not match');\n      return;\n    }\n\n    if (signupData.password.length < 6) {\n      setAuthError('Password must be at least 6 characters');\n      return;\n    }\n\n    try {\n      const response = await axios.post('/auth/register', {\n        name: signupData.name,\n        email: signupData.email,\n        password: signupData.password\n      });\n\n      if (response.data.success) {\n        localStorage.setItem('weKnowAuthToken', response.data.access_token);\n        localStorage.setItem('weKnowUser', JSON.stringify(response.data.user));\n        onSignup();\n        setSignupData({ name: '', email: '', password: '', confirmPassword: '' });\n      } else {\n        setAuthError(response.data.error || 'Registration failed');\n      }\n    } catch (err) {\n      console.error('Registration error:', err);\n      if (err.response?.data?.error) {\n        setAuthError(err.response.data.error);\n      } else {\n        setAuthError('Failed to connect to the server. Please try again.');\n      }\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"modal-overlay\" key=\"signin-modal\">\n      <div className=\"auth-modal\">\n        <button className=\"close-button\" onClick={onClose}>Ã—</button>\n        <h2>Sign Up</h2>\n        <form onSubmit={handleSubmit}>\n          <div className=\"form-group\">\n            <input\n              type=\"text\"\n              placeholder=\"Full Name\"\n              value={signupData.name}\n              onChange={handleNameChange}\n              required\n              autoComplete=\"name\"\n              ref={nameRef}\n            />\n          </div>\n          <div className=\"form-group\">\n            <input\n              type=\"email\"\n              placeholder=\"Email\"\n              value={signupData.email}\n              onChange={handleEmailChange}\n              required\n              autoComplete=\"email\"\n              ref={emailRef}\n            />\n          </div>\n          <div className=\"form-group\">\n            <input\n              type=\"password\"\n              placeholder=\"Password\"\n              value={signupData.password}\n              onChange={handlePasswordChange}\n              required\n              autoComplete=\"new-password\"\n              ref={passwordRef}\n            />\n          </div>\n          <div className=\"form-group\">\n            <input\n              type=\"password\"\n              placeholder=\"Confirm Password\"\n              value={signupData.confirmPassword}\n              onChange={handleConfirmPasswordChange}\n              required\n              autoComplete=\"new-password\"\n              ref={confirmPasswordRef}\n            />\n          </div>\n          {authError && <div className=\"auth-error\">{authError}</div>}\n          <button type=\"submit\" className=\"auth-submit-button\">Sign Up</button>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default SignupModal; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}